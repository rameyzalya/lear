<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial; background: linear-gradient(135deg, #667eea, #764ba2); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; }
        .container { width: 100%; max-width: 500px; }
        .todo-app { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; margin-bottom: 15px; }
        .input-section { display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 8px; margin-bottom: 15px; }
        input, select, button { padding: 8px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; }
        button { background: #667eea; color: white; border: none; cursor: pointer; }
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; }
        .tab { flex: 1; background: #f8f9fa; color: #666; }
        .tab.active { background: #667eea; color: white; }
        .task-list { min-height: 300px; }
        .task-item { display: flex; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 6px; margin-bottom: 5px; border-left: 4px solid #ddd; }
        .task-item.selesai { opacity: 0.6; background: #e8f5e8; }
        .task-item.tinggi { border-left-color: #e74c3c; }
        .task-item.sedang { border-left-color: #f39c12; }
        .task-item.rendah { border-left-color: #27ae60; }
        .task-checkbox { margin-right: 10px; }
        .task-content { flex: 1; }
        .task-text { font-weight: 500; margin-bottom: 2px; }
        .task-details { font-size: 11px; color: #666; }
        .priority { padding: 1px 6px; border-radius: 8px; margin-right: 5px; font-size: 10px; color: white; }
        .tinggi { background: #e74c3c; }
        .sedang { background: #f39c12; }
        .rendah { background: #27ae60; }
        .task-actions { display: flex; gap: 5px; }
        .edit-btn { background: #3498db; padding: 4px 8px; font-size: 11px; }
        .hapus-btn { background: #e74c3c; padding: 4px 8px; font-size: 11px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 20px; border-radius: 8px; width: 280px; }
        .modal-actions { display: flex; gap: 8px; margin-top: 15px; justify-content: flex-end; }
    </style>
</head>
<body>
    <div class="container">
        <div class="todo-app">
            <h1>üìù To-Do List</h1>
            
            <div class="input-section">
                <input type="text" id="taskInput" placeholder="Tugas baru..." onkeypress="if(event.key=='Enter')tambahTugas()">
                <input type="date" id="taskDate">
                <select id="taskPriority">
                    <option value="rendah">Rendah</option>
                    <option value="sedang">Sedang</option>
                    <option value="tinggi">Tinggi</option>
                </select>
                <button onclick="tambahTugas()">+</button>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="gantiTab('aktif')">Aktif</button>
                <button class="tab" onclick="gantiTab('selesai')">Selesai</button>
            </div>

            <div class="task-list" id="taskList"></div>

            <div class="modal" id="editModal">
                <div class="modal-content">
                    <h3>Edit Tugas</h3>
                    <input type="text" id="editInput">
                    <input type="date" id="editDate">
                    <select id="editPriority">
                        <option value="rendah">Rendah</option>
                        <option value="sedang">Sedang</option>
                        <option value="tinggi">Tinggi</option>
                    </select>
                    <div class="modal-actions">
                        <button onclick="simpanEdit()">Simpan</button>
                        <button onclick="tutupModal()">Batal</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let tabAktif = 'aktif';
        let taskEdit = null;

        function tambahTugas() {
            const input = document.getElementById('taskInput');
            const text = input.value.trim();
            if (!text || !document.getElementById('taskDate').value) return;
            
            tasks.push({
                id: Date.now(),
                text: text,
                completed: false,
                priority: document.getElementById('taskPriority').value,
                date: document.getElementById('taskDate').value
            });
            
            simpan();
            render();
            input.value = '';
        }

        function gantiTab(tab) {
            tabAktif = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            render();
        }

        function toggleSelesai(id) {
            tasks = tasks.map(task => task.id === id ? {...task, completed: !task.completed} : task);
            simpan();
            render();
        }

        function bukaEdit(id) {
            taskEdit = tasks.find(t => t.id === id);
            document.getElementById('editInput').value = taskEdit.text;
            document.getElementById('editDate').value = taskEdit.date;
            document.getElementById('editPriority').value = taskEdit.priority;
            document.getElementById('editModal').style.display = 'flex';
        }

        function hapusTugas(id) {
            if (confirm('Hapus tugas ini?')) {
                tasks = tasks.filter(task => task.id !== id);
                simpan();
                render();
            }
        }

        function simpanEdit() {
            if (taskEdit) {
                taskEdit.text = document.getElementById('editInput').value.trim();
                taskEdit.date = document.getElementById('editDate').value;
                taskEdit.priority = document.getElementById('editPriority').value;
                simpan();
                render();
                tutupModal();
            }
        }

        function tutupModal() {
            document.getElementById('editModal').style.display = 'none';
            taskEdit = null;
        }

        function render() {
            const list = document.getElementById('taskList');
            const filteredTasks = tasks.filter(task => tabAktif === 'aktif' ? !task.completed : task.completed);
            
            if (filteredTasks.length === 0) {
                list.innerHTML = `<div style="text-align:center; color:#666; padding:40px;">${tabAktif === 'aktif' ? 'Tidak ada tugas aktif' : 'Tidak ada tugas selesai'}</div>`;
                return;
            }
            
            list.innerHTML = filteredTasks.map(task => `
                <div class="task-item ${task.completed ? 'selesai' : ''} ${task.priority}">
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} onchange="toggleSelesai(${task.id})">
                    <div class="task-content">
                        <div class="task-text ${task.completed ? 'selesai' : ''}">${task.text}</div>
                        <div class="task-details">
                            <span class="priority ${task.priority}">${task.priority.toUpperCase()}</span>
                            <span>üìÖ ${new Date(task.date).toLocaleDateString('id-ID')}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="edit-btn" onclick="bukaEdit(${task.id})">Edit</button>
                        <button class="hapus-btn" onclick="hapusTugas(${task.id})">Hapus</button>
                    </div>
                </div>
            `).join('');
        }

        function simpan() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('taskDate').value = new Date().toISOString().split('T')[0];
            render();
        });
    </script>
</body>
</html>